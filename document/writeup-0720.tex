\documentclass[hidelinks,12pt]{article}
\usepackage{hyperref}
\usepackage{enumitem,changepage,lipsum,titlesec}
\usepackage{cite}
\usepackage{comment, xcolor}
\usepackage[pdftex]{graphicx}
  \graphicspath{{images/}, {images/stat/}}
  \DeclareGraphicsExtensions{.pdf,.jpeg,.png, .jpg}
\usepackage[cmex10]{amsmath}
\usepackage{array} 
\usepackage[tight,footnotesize]{subfigure} 
\newcommand{\grey}[1]{\textcolor{black!30}{#1}}
\newcommand{\fref}[1]{Figure \ref{#1}}

\oddsidemargin0cm
\topmargin-2cm %I recommend adding these three lines to increase the
\textwidth16.5cm %amount of usable space on the page (and save trees)
\textheight23.5cm

\makeatletter
\renewcommand\paragraph{\@startsection{paragraph}{4}{\z@}%
            {-2.5ex\@plus -1ex \@minus -.25ex}%
            {1.25ex \@plus .25ex}%
            {\normalfont\normalsize\bfseries}}
\makeatother
\setcounter{secnumdepth}{4} % how many sectioning levels to assign numbers to
\setcounter{tocdepth}{4}    % how many sectioning levels to show in ToC


\begin{document}
\title{Dynamic Energy Mapping Project Outline}
\maketitle
\tableofcontents
\newpage
\begin{abstract}
  This document provides an approach of adding the ``time'' dimension
  to an Energy Map. The approach is demonstrated with a model of a
  conceptual urban setting created in CityEngine based on the
  extracted topological and density pattern from an existing urban
  design project. The buildings in the conceptual model is then
  assigned an energy profile of certain DOE Commercial Benchmark
  Building Reference model based on its building type. Hourly energy
  demand profile of heating and cooling end use is then obtained from
  the EnergyPlus simulation of DOE Commercial Benchmark models. The
  energy consumption data is classified into groups with consideration
  of building energy design context and the data distribution
  properties. A corresponding color coded energy profile is then
  generated and imported to CityEngine. 8760 color coded 3D map images
  was then extracted from CityEngine with Python script. A series of
  data reading, ploting, data classification and color-coding
  calculation utilities were implemented. A interactive interface for
  visualizing the images and dynamic data plot with sliders is
  implemented using Python and related packages. The tool is
  anticipated to provide decision support for community energy
  management and planning, demand-side strategy design and district
  system sizing.
  
  The document will also briefly discuss one of the testbed for data
  classification and visualization.

\end{abstract}
\newpage

\section{General Introduction}
\subsection{Project Overview}
Buildings alone account for 40\% of the total energy usage in the
United States. However the indirect energy impact of the built
environment as a whole was considered, the community design induced
energy and environmental impact could exceed this already high
ratio. The focus of reducing energy usage in the building sector has
once been focused only on the scale of individual buildings and
equipment~\cite{Jaccard19971065}. Community level urban design and the
infrustructure layout can inevitably influence the overall energy
throughput by influencing people's life pattern, energy using behavior
and waste production.

Community Energy Management (CEM) is a combination of community level
design strategies and energy management strategies aiming at providing
quality of life in an urban environment with minimized energy
consumption and environmental impact~\cite{Jaccard19971065}. The
awareness of the importance of the environmental design on energy
performance and quality of life is reflected in design concepts such
as New Urbanism, Smart Growth and Transit-Oriented Growth. These
concepts advocate a compact and pedestrian and bicycle friendly urban
growth that minimizes car usage by creating mixed-used communities,
well-functioned road, complete public transportation system and
diverse housing choices~\cite{smartGrowthWiki}.

The core of the community energy management is to match the demand and
supply as close as possible in terms of energy and
exergy~\cite{Dobbelsteen2013}. CEM reduces energy use impact by 1)
distributed energy generation with sustainable energy source that
close in exergy to the demand side, 2) application of district energy
system that reuses waste heat 3) energy cascading that arranges the
demand side as a chain of decreasing exergy demand so that the entropy
generation is minimized 4) smart grid system that makes electricity
demand and supply match.

Energy Map provides great opportunity to execute the CEM strategies
since it accords with the concept of ``geo-design'', a
performance-based design method, and makes the energy performance
metrics of community design and management alternatives visible to
planners and policy makers. It facilitates quantitive comparison of
design alternatives and informs better decision making. However the
temporal variation of energy performance metrics is missing from the
majority of current Energy Maps, leading to a simplified picture of
energy impact of design choices and poor decision making such as
excessively oversized infrustructure systems and loss of energy
recovery and reuse opportunities.

Dynamic Energy Map reveals the temporal variation and better serves
``geo-design'' approach by revealing the problem of such simplified
pictures of energy supply and demand and support better time-of-use
energy system design, community energy management and policy making.

The current project aims at exploring how a Dynamic Energy Map can
serve as decision support tool for Community Energy Managemeng, more
specifically, to support district energy system design. The focus of
the study is not on expoiting the energy using behavior of a specific
site, but rather a exploration of a generic methodology, thus the map
setting is based on a conceptual city model with a size (comprable to
the typical service area of a district energy (combined heating and
cooling) system, about 50 to 150 buildings~\cite{IDEA2005}. The Dynamic
Energy Map is built upon hourly heating and cooling energy consumption
data from DOE Commertial Benchmark Building simulation. City Engine is
used in 3D urban environment image generation with each building
color-coded according to its hourly energy demand. An interface is
then designed to achieve the ``dynamic'' function with sliders to
navigation through the 8760 hours through a year and present the
energy consumption data in the form of 3D color-coded map and data
plot.

\grey{summary of each section of the report here...}

\subsection{Definition of Energy Map}
\subsubsection{Energy Thematic Map}
In a restricted sense, Energy Map is an instance of a thematic map
that depicts energy information. It is an abstract representation of
some energy feature in an urban environment. It is useful in providing
energy related qualitative or quantitative insight. 

The energy topics depicted in an Energy Map can be classified into
four major categories: energy supply, energy demand, energy related
building design / urban planning, and energy related environmental
impact. One common sub-category of the supply side topics concerns the
locations and evolving process of energy infrastructures such as power
plants, energy transmission pipelines, energy refining facilities and
market hubs. EIA state energy profile map~\cite{EIAProfile2015},
U.S. natural gas pipeline map~\cite{EIAGaspipe} are under this
sub-category. Other supply side topics include total energy production
~\cite{DOEEnergyProduct}; total energy source production like global
coal production map~\cite{EIACoalProduct}; sustainable energy
potential map of wind, solar, biomass, geothermal energy
potential~\cite{NRELMap2015} and hidropower
potential~\cite{DOEHydro}. Common demand side topics include: energy
demand for one or more enduses ~\cite{heatMap2012}, energy source
demand like coal demand ~\cite{EIACoalDemand} and energy cost
~\cite{DOEEnergyCost}. The design side topics concerns building
physical conditions like Calgory Heat Map ~\cite{Hay2011}, design
policy information like climate zone map~\cite{IECCClimate} and energy
code adoption map~\cite{CodeAdopt}. The energy behavior environmental
impact map include both the impact of building or energy
infrastructure to environment and the environment change to buildings
or infrastructures. The carbon emission map as ~\cite{CO2Atlas} is an
instance of the former and the ``Energy Sector's Vulnerabilities to
Climatic Conditions'' Map is an example of the
latter~\cite{DOEVulner}.

It is necessary to mention some unfortunate terminology overloading
involved in the topic of Energy Map. The term ``Heat Map'' used in
this discussion refers to the Energy Map with building heating energy
as its theme, not to be mis-interpreted as the color-coded
representation of matrix values as in this
definition~\cite{HeatmapWiki}.

The history of thematic map dates back to early 17th century, and from
then on maps can present spatial patterns of some feature in addition
to merely recording locations of geographic
features~\cite{ThematicMap}. Over a century later, spatial analysis
emerges and map starts to assisting geo-data analysis. Finally after
the born of modern computer and the development of database, map
becomes a more powerful information system that undertakes more
complecated tasks including data aggregation, managing, query and
presentation. This gives Energy Map a much broader meaning.

\subsubsection{Geo-database of Building Energy}
In a broader sense, Energy Map is a hibernation of two types of
databases: building energy database, a subset of the BIM (Building
Information Model), and Geographical Information System (GIS). The
basic functions of an Energy Map includes 1) storing energy data in an
organized fashion, that facilitate easy analysis and query of energy
data and 2) provide reports in the form of graphs, tables, animations
etc that conveys numerical information in a way that best support
pattern recognition and decision making. 

This definition can be considered as a superset of the thematic map
definition, so the energy topics inherits those representable in the
thematic energy map. Some examples of the Energy Maps under this
``database'' definition include: National Heat Map that records and
presents heat demand density of buildings and building sectors,
Renewable Energy Potential Map that uses GIS tool in renewable and
residual energy potential assessment~\cite{Voivontas1998333}, a site
selection model that evaluates different choices of power plant
location~\cite{Yeo201499}, and ``Heat maps'' with information of heat
sources and sinks that supports district system expanssion
design~\cite{Finney2012165}.

\subsubsection{Coupled Geo-database and Energy Simulation Platform}
``Geodesign is a design and planning method which tightly couples the
creation of design proposals with impact simulations informed by
geographic contexts''~\cite{Flaxman2010}. It is a performance based
approach in urban and environmental planning. Traditionally, each
performance metric is represented with a choropleth map layer. By
stacking these layers together, the performance metrics are aggregated
for each location on the map and a judgement of design alternatives
are formed based on the aggregated performance
metrics~\cite{CPcp66-goodchild}. However, some of the performance
metrics require complicated calculation or simulation, especially
those with temporal variations. Hence the new development of Energy
Map will not only record data but also ``produces data'' by providing
stooth connections to urban level energy simulation tools that
calculates energy performance metrics of different design alternatives
on the fly. This enhanced Energy Map may effectively automates
the geo-design work flow.

\subsection{Why ``time'' dimension is important for an Energy Map}
\subsubsection{Strong Temporal Variation of Energy Demand}
Building energy demand is strongly dependent on weather condition,
building type, size, building physical design, building mechanical
system and appliance quality and building operation schedules.  The
aggregation of all parameters results in a great variance in the range
and extreme value of energy consumption. Weather condition have strong
seasonal pattern and day-night pattern. This type of variation takes
the form of a global influence on building heating or cooling
load. Building operation schedules vary greatly from building to
building as a result of difference in building type and occupant
behavior. Different operation scheduces indicates the arrival of peak
demand within a mixed-use urban environment are not
simultaneous. Difference in building type also suggest difference in
indoor environment requirement such as ventilation rate, lighting
intencity etc., indicating a dramatic variation in energy consumption
data distribution among buildings in the community. 

\subsubsection{More Detailed Description of Energy Behavior Supports
  Better Design}
A simple annual or monthly average cannot effectly represent the real
energy consumption behavior of an individual building and the whole
urban environment. In order to present this complecated behavior of
time-depandent energy demand, the time dimension is necessary.

For example, hospitals are usually constant heat consumers with very
stable heat demand throughout a year, while a performance center is,
on the other hand, an occassional huge heat consumer with very high
peak demand occur occassionally at event time and with almost zero
demand in the remaining time. It is reasonable to apply different
energy planning strategy for building groups involving one of these
two types of buildings. However, if time dimension is not included,
one has to choose some form of aggregate description of the energy
consumption, be it average, maximum, minimum or annual total. For most
cases, annual total demand is used for representing a building's
energy demand. With this approach, the different energy usage pattern
of a hospital and a performance center is not differentiable.

\subsubsection{Aggretation of Peak Value Becomes Tricky for Data with Time Variation}
See section \ref{district}
\grey{(move things above)??}

\begin{comment}
\subsubsection{Temporal variation of the Supply Side}
The commonly used renewable energy source includes: solar, wind,
geothermal, hydropower and biomass. Among these sources, solar energy
have strong temporal fluctuation as a result of the temporal variation
of solar radiation between different hours of a year and the time of
year~\cite{EIARenewable2015}. There is also a cost difference involved
in the electricity supply.
\end{comment}

\subsubsection{Close Match of Supply Side to Demand Side Improves
  Community Scale Energy Performance}
As a result of the finiteness of fossil fuels, the using of renewable
energy begins to come into play. In 2013, renewable energy account for
9\% of the primary energy source of residential and commercial
buildings ~\cite{EIAPrimary2013}. Electricity generated from
sustainable sources normally do not have much storage capacity, hence
in order to meet the energy demand with renewable electricity, a
better understanding of the spatial-temporal pattern of energy demand
is important~\cite{Mikkola2014256}.

Demand-driven energy supply is necessary to reduce energy waste and
achieve better total community energy performance, and in order to
match the supply side to the complicated behavior of the demand side,
understanding the spatial-temporal pattern of the energy demand 
in the early design and planning stage is important. 

\paragraph{District Energy System Sizing}\label{district}
A district energy system consists of a power plant, a series of
buildings as ternimal energy users and a network of pipelines that
transmit energy from the power plant to end-users. Commonly used media
for energy transmission include steam, hot water or chilled
water~\cite{baird2014}. A district energy system helps reducing
negative environmental impact by harvesting residual energy in the
form of rejected heat or coolth in the process of electricity
generation or other industrial processes. It can adapt to a broader
range of fuel choices including natural gas, oil, coal, biomass and
garbage. This makes it more flexible and more competitive in the
market~\cite{IDEA2005}. Other non-environmental benifits include
reducing the space dedicated to mechanical system and improve design
building design flexibility, reducing harmful gas production from
stand-alone boiler conbustion.

Dynamic Energy Map supports district energy system design by 1)
revealing the non-coincident peak demand of heat or coolth 2)
providing the aggregated demand supporting better decision making.

Obvious mathematical concepts sometimes become more obscure when it
comes to real life problems. It is well understood that linearity
holds for expectation not max, i.e. the sum of max values of each
distribution does not equal to the maximum of the sum of values in
each distribution. However this mistake is not rare in the sizing of a
district system. One common approach of sizing a district system is to
add up the capacities of each terminal devices. However, each
individual device is sized to meet its peak demand. Since the peak
demand of individual buildings do not occur at the same time, the end
result of summing up the max demand at each end point exceeds the
actual total demand peak of the community, hence with this approach,
the whole district system becomes excessively oversized, which reduces
the whole system efficiency. Dynamic Energy Map can reveal the problem
of such approaches by directly providing the aggregated demand and the
demand for single buildings or building sectors side by side,
eliminating the misunderstanding of the aggregated demand and
providing the actual data for system sizing.

\paragraph{Community Energy Planing}
As is mentioned in the project overview, the community energy planning
involves landuse design and infrustructure design. The time dimension
is important to community energy planning because it reveals the
temporal complexity of the community energy supply and demand. The
ability to describe the energy using behavior with more details then a
mere max, min and average and to classify building energy demand into
more detailed behavior prototypes is the first step to energy oriented
landuse plan, demand side energy management and energy cascading
design. This more accurate picture also act as the basis of further
design of energy supply.

With Dynamic Energy Map, one can classify energy sources and sinks
into more specified categories and design for more specific
combinations of sources and sinks. One can also identify energy
sources and sinks that dynamically changes over time. The
temporal-spatial energy supply and demand information can be helpful
in the following cases:
\begin{itemize}
\item Enable the design of local load balancing

  Large public facilities like stadiums or performance centers
  normally have mechanical systems with large capacity to meet its
  peak demand but the large capacity might only be used under
  occassional event. Dynamic Energy Map helps identify such
  occassional heavy energy consumers and helps optimize landuse
  planing by arranging the right amount of surrounding consumers
  around and optimize the local system design by redirect the energy
  capacity of the ocational heavy consumer to surrounding
  buildings~\cite{IDEA2012}

\item Support the design of connections to district network

  Dynamic Energy Map can identify buildings with constant high heat
  demand and buildings with occassional low heat demand. By identify
  these two types of buildings, urban planners could connect the
  former to the district system and the latter could be connected to
  the former with ambient water loop so that the latter could
  ``borrow'' heat from the former and reduces the community energy
  throughput.

\item Help design of local energy storage devices

  Energy storage devices can shift the peak supply to meet peak
  demand, and it also made the community energy flow more
  complicated. Accurate information of the surplus and deficiency over
  time helps design the storage capacity for single building, building
  group and the whole community.

\item Convey the energy benifit of mixed-landuse.

  With a Local Dynamic Energy Map, one could compare the total energy
  demand and the demand variation directly between the mixed landuse
  case and the single landuse case. The benefit of community level
  load balancing could be visible to the policy makers and planners to
  inform better landuse design.

\end{itemize}

\subsection{General Description of Dynamic Energy Map}
Within the current context, ``dynamic'' refers to changing over time,
hence Dynamic Energy Map is an Energy Map equipped with temporal
information. Sometimes this type of map is referred to as
``spacetime'' map~\cite{Brownrigg2005}. As a result of the ``dynamic''
property, one assumption about Dynamic Energy Map is that at least one
of the energy related variables depicted in the map should change over
time. Due to the fact that there are three versions of definitions for
Energy Map, there are also three versions of corresponding Dynamic
Energy Map.

\subsubsection{Thematic Map Time Series}
In a restricted sense, where an Energy Map is defined as a thematic
map focusing on energy topics, Dynamic Energy Map is just a series of
maps, each of which is a thematic Energy Map representing the status
of energy information happened at a certain time spot. Also with the
convention that thematic maps are ordered in increasing time order.
The purpose of such a Dynamic Energy Map is to facilitate the
comparison of thematic maps at different time steps. Baring this in
mind, it makes more sence to apply a universal map symbol and
breakpoints to the sequence of thematic maps in this version of
Dynamic Energy Map.

\subsubsection{Spatial-Temporal Energy-geo-database}
In a broader sence, where Energy Map is defined as
energy-geo-database, Dynamic Energy Map is an energy-geo-database with
``time'' being one of its data entries. One major purpose of Dynamic
Energy Map under this definition is to enable search, filter and query
of the energy data by ``time'' field, thus presumably, time should act
as one of the indexes in the database that facilitates faster search
and query of the time data.  The second task of Dynamic Energy Map is
to provide more powerful reporting tools than normal Energy Maps that
accounts for the difficulty and complexity of spatial-temporal data
visualization aiming at better conveying the dynamic spatial
pattern.

\subsubsection{Performance Based Geo-design Support Platform}
When Dynamic Energy Map becomes a platform coupled with Energy
Simulation tools, design alternatives would be evaluated and compared
at each given time spot or time window according to the design
context. This enables more detailed energy analysis.
\newpage
\section{Objective and Problem Definition}
\subsection{Exploring potential use cases of Dynamic Energy Map}
The major objective of this study is to explore the power of Dynamic
Energy Map with a use case senario of supporting district energy
system design, which is one of the infrastructure side strategy used
in community energy management. Aligned with this major goal, there
are two sub-goals of the project: evaluating some possible approaches
to implement dynamic energy map and presenting one major
implementation approach

\subsubsection{Definition of Dynamic Energy Map for Supporting
  District System Design}
District system supply thermal energy to the surrounding community,
thus the community heating or cooling demand decide the size of a
district system. Therefore heating demand and cooling demand are
selected as the major variables in the study. We define ``Local''
Dynamic Energy Map for Community level design support as:
\begin{itemize}
\item A database holding 8760-hour meta data of energy demand of
  buildings in a moderate sized community served by a district
  system~\cite{baird2014}.
\item An interface that has multi-dimensional graphical display of the
  meta data.
\end{itemize}

The data display would include 1D data plot, 2D or 3D map and 4D
temperal-statial navigation:
\begin{itemize}
\item 1D: data plot for providing quantitative information of energy
  demand or supply

  The Local Dynamic Energy Map displays the aggregated hourly energy
  demand of the whole community and major building sectors throughout
  the year. It enables comparison of different urban design
  alternatives in terms of total demand and demand variation. These
  information supports district system planning by arranging landuse
  design to minimize load variation.

\item 2D or 3D: graphical display of spatial relationship of energy data

  The Local Dynamic Energy Map applies a graduated symbol or color to
  buildings in the community to provide the intuition of the building
  energy demand changing within a community. It helps identify the
  rank of energy demand in a community and provides a guidance in
  energy cascading design.
    
  For univariant map senario, we suggest the variant size symbol
  according to the study of Garlandini et al.~\cite{Garlandini2009,
    doi:10.1559/1523040639298}. For bivariate map
  senario~\cite{bimapWiki} in 3D map design, we suggest the bivariate
  choropleth map representation. For detailed explanation please refer
  to section \ref{mapDesign}.


\item 1D + 2D or 3D: interactive graphical display of spatial-temporal
  pattern of energy data.
  
  The Local Dynamic Energy Map compares energy demand of different
  time of year by providing a easy navigation with a time
  slider. Energy demand of each time spot is expressed with 2D or 3D
  map and 1D data plot.
\end{itemize}

\section{Related Works}
\subsection{Static Energy Map}
The majority of existing Energy Map instances are static maps with no
time information. As is mentioned in the thematic map definition, the
major application of Energy Maps include energy supply, energy demand,
building or infrastructure design resulted energy impact and
environmental impact. The sub-section will present some more detailed
examples in each use cases.

\subsubsection{Supply}
\paragraph{Assessing Renewable Energy Potential}
In order to reduce environmental impact, increase resilience of local
energy supply and match energy intensity of supply and demand in urban
environment, renewable energy source of wind, solar, geothermal,
biomass and hydropower becomes an increasingly important energy
source. Comparing with fossil fuel, the energy production with
renewable energy has strong correlations to geo-locations, thus the
energy map of renewable energy availability and demand can support
energy planning that aims at improve urban scale energy
performance~\cite{Ramachandra20071460}.

Some study focuses only on one type of renewable energy source.
\begin{itemize}
\item Wind: 

Voivontas et al. developed a decision support tool using GIS for
accessing the wind energy potential in four aspects:the theoretical
potential in terms of wind speed, availability potential in terms of
landuse regulations and technological potential in terms of energy
production features of wind turbine and economical potential in terms
of IRR. 
\item Solar

``NYC City Solar Map'' presents solar energy potential for
buildings across the New York city. The map presents solar energy
generation curve, estimated solar system installation area, finantial
incentive and payback~\cite{NYCSolarMap}
\end{itemize}

Other efforts tackles multiple renewable energy sources:

Ramachandra and Shruthi produced a series of district level renewable
energy theoretical potential maps of solar, wind, hydroenergy and
biomass in Karnataka State, India. The potential is estimated based on
data of global solar radiation, wind speed, hydropower plant capacity,
and plantation and livestock information. GIS is used in aggregating
energy potential data to each district. Each type of renewable energy
source is presented as a single variable thematic energy map.

\subsubsection{Demand and Infrastructure}
\paragraph{Analysis or design support of existing energy
  infrastructures}
Finney et al.\ studied the potential expansion opportunities for the
Sheffield district energy network by producing a heat mapping that 1)
depictes heat sources and sinks, including existing ones and emerging
ones 2) identify ``heat zones'' by connecting sources and sinks. The
``heat zone'' is then filtered with concerns of economic feasibility
and environmental impact. The network extenssion is then designed
based on the remaining ``heat zones''. Heat demand is assessed with
population density for residential buildings and is represented on the
map as polygon features with graduated color. Heat demand for
non-residential buildings are assessed with gas consumption and is
mapped as point features with graduated size. Heat sources are
identified with the criteria ``producing recoverable, low-grade
'waste' heat''~\cite{Finney2012165}. They are mapped as point features
including steelworks, combined heat and power (CHP) plants, and
biomass power stations. The ``heat zone'' is identified based on
abundance of sources or sinks.

National Heat Map is a ``publicly accessible high resolution
web-based'' heating energy interactive map, developed by the
Department of Energy and Climate Change (DECC) in UK. It aimed at
``support planning and deployment of local low-carbon energy projects
in England''~\cite{heatMap2015}. Heating demand density ($kwh/m^2$) of
four major building sectors: public buildings, commercial buildings,
industry buildings and residential buildings, together with the total
demand is plotted on the map as 2D raster feature with a color scheme
from blue to red, with blue for low heating demand and red for high
heating demand. Heat source of CHP stations and ``Thermal Power
Stations'' ~\cite{heatMap2012} are plotted as point features in the
map. Address level heat demand data in csv format is also available
for local authorities~\cite{heatMapLocal2012}. 

The ``Water Source Heat Map'' is an added layer group to the existing
National Heat Map with information about the the heat potential of the
4041 waterways in England. Heat potential of waterways are represented
in temperature, surface area, flow rate and heat capacity ($kJ/m^3$
for coastal and estuary, $kW$ for canal, river and settlement). It
aims at supporting the plan of water-based thermal system as
water-based heat pump~\cite{waterHeatMap}. The map revealed the large
thermal capacity of water bodies that could serve over one million
buildings~\cite{waterHeatMap}.

\paragraph{Energy consumption prediction model}
Kolter and Ferreira presented a modeling method to predict building
energy enduse in Cambridge, MA. They also developed a user
application, ``Energy View'' with two target user groups: general
public and local authorities. The model can be used by local
authorities to identify energy usage outliers and by general public to
compare their monthly energy consumption with predicted baseline
consumption.

\paragraph{Smart Management of Urban Energy System}
Energy Map also helps smart management of energy system in a large
urban scale. ``Smart Urban Services for Higher Energy Efficiency''
(SUNSHINE) project is a European Co-Founded project launched in
2013. It is accessible through webpage and smartphone or tablet
application. It aims at developing a platform capable of 1) assessing
building energy consumption behavior and create a 2D and 3D energy
map, ``ecomap'' accordingly 2) providing automatic alerts regarding
optimized usage of heating/cooling system 3) remote control of public
building lighting systems~\cite{SUNSHINE2015}. The target users of the
application include facility managers, policy makers, citizens and
energy service companies. Function 1) is anticipated to help energy
company and facility managers to identify energy consuming outliers,
provide information for building pre-certification. Function 2) aims
at providing more accurate baseline consumption data using weather and
meter data. Function 3) allows better management of public lighting
system based on illuminance requirements and weather conditions.

\subsubsection{Combined Supply, Demand and Infrustructure}
Dobbelsteen et al. described a framework of energy potential mapping
that depicts information of energy supply, demand and infrastructure.
Comparing with the previous examples, that 1) in addition to renewable
energy source, it also considered residual energy as energy sources
and 2) aggregated multiple types of energy potentials in a single map
with the unit of GJ or GJ/ha~\cite{Dobbelsteen2013}. The energy
potential of sources are estimated by theoretical potential multiplied
by a serious of ``limiting factors''. The energy demand includes
buildings and transportation. The authors also suggest to map energy
storage on the map. A case study of ``HEAT Mapping'' is presented with
aggregated supply and demand presented in a single 3D Heat Map. The
absolute quantity of each type of demand and supply of a certain
region is represented with extruded height in the 3D map. Demand is
represented with a transparent 3D feature, each supply source is
represented with solid 3D feature in a different color. The
aggregation of information is valuable in answering the question of
whether the supply meets the demand, the representation becomes too
complicated~\cite{Dobbelsteen2013}.

\subsubsection{Reflections}\label{Reflection}
The existing mapping approaches had their main effort in the data
calculation and aggregation, however the resulted visual
representation is questionable for most instances. One common issue is
too much distraction from unthoughtful map symbology design. For
static maps, a poorly designed visual representation might still be
tolerable, but for Dynamic Energy Map with an additional time
dimension, each additional bit of distraction will prevent the
necessary information from getting through. Hence the authors think it
is necessary to discuss the map design aspect, and look for examples
of best practices. This is done in section 3.2.3.

\subsection{Dynamic Map}
The aim of this section is to explore how the time dimension can be
represented in a map.
\subsubsection{Energy Dynamic Map}
Current Dynamic Energy Map instances are mainly 2D animated maps with
large time steps, in large spatial scale and low resolution (state
level), and very few number of frames. These instances include: State
wind power capacity map that depicts the wind industry growth at state
level from 2000 to 2050~\cite{DOEWind}, wind farm development map that
shows the wind farm location and capacity development from 1975 to
2013~\cite{DOEWindFarm}, solar plant development map that shows the
solar plant location and capacity development from 1975 to
2013~\cite{DOESolarPlant}, US Energy Production Map that shows
statewise energy production from 1993 to 2012~\cite{DOEEnergyProduct},
$CO_2$ emission map presenting world-wide carbon emissions from 1980 to
2014~\cite{CO2Atlas}

One instance of the high resolution energy demand dynamic map was
found in the project ``Energy Mapping to Identify Opportunities for
Future Networks''~\cite{Diaz2013}. The aim of the project is to
``analyse the spatial and temporal distribution of energy
consumption'' and support decision making and design of energy network
development. Energy data was retrieved from both metered data and HEM
simulation. Energy Demand Maps of three different resolutions were
created: campus level, community level and city level. For campus and
community level maps, monthly heating demand density dynamic map and
monthly electricity demand density dynamic maps are created with
($kWh/m^2$) as the unit. The energy demand is represented in a scale
from blue to red, the same as the approach of the National Heat
Map. The time dimension is added in the form of a non-interactive 2D
animation . The problem for this animation is the lack of temporal and
spatial legend and its non-interactive nature. Also the heating and
electricity demand is represented separately, making the pairwise
comparison of these two variables difficult.

\subsubsection{History and Archaeology Instances of Dynamic Maps}
Although based on current knowledge of the authors, Energy Maps
equiped with the time dimension is still rare, but there already
exists many instances of dynamic interactive map in History and
Archaeology practices. Pittsburgh Historic Map displays the urban
environment layout of the City of Pittsburgh from 1835 to 2015 using a
combination of historic maps and Google map as the base map. It allows
users to navigate through the times with a time slider. It also
contains point features of historic buildings\cite{EsriHistory2015};
Europe History Interactive Map that demonstrate the changes of
political boundary with historic information associated to each
political entity~\cite{Worldology2009}. User can navigate through
different historic period by forward and backward arrows and by
clicking on specific entries to that period.

\subsubsection{Works on Map Design}\label{mapDesign}
\paragraph{Symbol Chosen}
Dong et al.\ assessed the effectiveness of symbol design and frame
rate on the effectiveness on dynamic map display with two metrics:
deviation and response time. They discovered the change of symbol size
is more effective than color under the same frame rate. They also
identified the optimal class numbers for graduated size symbol (15)
and graduated color symbol (10) on 1024x768 display. The optimal frame
rate identified in the study is 3 for color symbol maps and 6 for size
symbol maps. They also suggest to reduce class number and frame rate
if the display size is smaller than
1024x768~\cite{doi:10.1559/1523040639298}.

\paragraph{Bivariate Map Design} \label{bivariate}
In order to represent heating demand and cooling demand are on the
same map together, we encounter a common map design problem: bivariate
map design problem. Elmer presented eight possible types of
representation for bavariate maps: ``shaded cartogram, rectangle map,
bar chart, value by alpha, choropleth with graduated symbol, bivariate
choropleth, spoke glyph and shaded texture''~\cite{Elmer2012}. In our
current case of 3D representation, to incorporate the map symbol to
the 3D model, the representation with dimensional changes are not
suitable since they will distort the actual building geometry which
makes the urban environment un-realistic. The only choices are the
ones that only involves color or texture, i.e. representing the change
of each variable with color or texture, corresponding to ``bivaiate
choropleth, value by alpha and shaded texture''. Among these three
choices, bivariate choropleth representation has the highest accuracy
rate, hence we choose bivariate choropleth as the representation of
the current map interface design.

\subsubsection{Works on 2D vs. 3D} \label{2d3d} As is mentioned in
Brownrigg, the choice of 2D representation vs. 3D representation is
one of the debating decisions in the world of data
visualization~\cite{Brownrigg2005}. 2D maps are easier to navigate and
2D map design has better theory support while 3D maps don't. The
advantage of 3D map is its rich and realistic environment.

\subsubsection{Works on Map Design Conveying Spatial Temporal
  Information}
\paragraph{Time Representation}
Brownrigg mentioned several methods of representing time on a map: 1)
a graph or chart that represents a function over time or a timeline
for displaying chronological events 2) animation of snapshots 3)
small-multiples of snapshots of changing states
~\cite{Brownrigg2005}. The graph or chart representation of temporal
time series is used in the current interface design to anchor the
quantative information. The interactive animation approach is used for
the map display, as is apposed to small-multiple method. The choice is
based on the following points mentioned by Brownrigg: 1) the number of
snapshots in one display is limited and the finer the detail per
snapshot, the less snapshots one can contain in one display. Since the
3D representation is chosen as the major map display method, the level
of details per image is high, which will result in a very small number
of multiples per display 2) the subtle changes are easier
to be noticed in the form of animation than with small-multiples. Both
of the two drawbacks of small-multiple method will impair the ability
of conveying the rapid temporal changes of energy behavior, hence is
not suitable for the current project.

\paragraph{Animated Maps}
As is mentioned in section \ref{Reflection}, the majority of the map
design of Energy and Dynamic Energy Maps are not thoughly considered
and contain too much distraction. Hence the authors think it is
helpful to conduct theory and case studies of temporal-spatial map
design in the current project of Dynamic Energy Map.

In order to represent dynamic geographc process, map animation is a
natual solution and it was introduced to the world of cartography in
1930s~\cite{Harrower2008}. The major application of animated maps
include: 1) demonstration of intuition of dynamic geographic process,
such as weather maps in weather forecasting 2) assisting pattern
recognition and knowledge development for scientific researches, such
as the study by Dorling and Openshaw, where they discovered new
leukaemia hotspots through animated maps~\cite{Dorling1992}.

Harrower and Fabrikant mentioned that the chanllenge of using animated
maps is the overflow of information and the volnerability to
distraction. One example mentioned by Harrower and Fabrikant is the
comparison of color on the map and that on the legend becomes
difficult for animated maps as a result of the changing of
images. This issue is considered in the current Dynamic Energy Map
interface design, with a series of tick marks that pointed out the
colors used on the map, for more details, please refer to section x.x.
They also proposed one approach of strengthening information convey
with minized distraction introduced is to use audio
legend~\cite{Harrower2008}. This might become one of the next
extenssions of the current Dynamic Energy Map interface design.

They also suggested that the difference in time should have different
visual representations in data display~\cite{Harrower2008}. Peuquet
claimed that ``The development of temporal analytical capabilities in
GIS such as temporal queries requires basic topological structures in
both time and space''. Thus the different spatial representation seems
to be a natural choice for adapting to different temporal resolution
and scale. The two major types of time are linear and cyclic. Upon
this consideration, the design of the current interface considered
adding utilities that facilitates jumps with time steps corresponding
to the natural period of data time series, such as month, day and
hour. This design choice is anticipated to facilitate the
representation of both linear changes and periodical changes of energy
usage in the community.

The level of user control of playback behavior to animated maps is
also debatable. Some claim providing the full freedom of adjusting
this feature can enhance pattern understanding~\cite{Nelson1998}. But
others argue that this control will impair the ability of animation in
convey temporal change pattern and reduce it to still
images~\cite{Lowe2004}.

The technology of implementing a dynamic map has been exceeding the
catographic theory~\cite{Harrower2008}. This makes the design of
Dynamic Map even more difficult. Animated maps are not superior to
static maps, it is just they are good at different aspect of
information convey. The animated map is advantageous in demonstrating
the changes between frames rather than the absolute value represented
in each frame~\cite{Dorling1992}. It is proved to be more powerful in
convey the spatial-temporal pattern than static
map~\cite{McEachern1998}.

\begin{comment}
``Data Visualization with Spacetime Maps'', Richard L. Brownrigg, 2005
(read further later on)
\end{comment}

\grey{To be continued later:
\begin{enumerate}[label*=\arabic*.]
\item ``Geographic Visualization: Designing Manipulable Maps for
    Exploring Temporally Varying Georeferenced Statistics'', MacEachren et al.\
\item ``Strategies for the Visualization of Geographic Time-Series
    Data'', Mark Monmonier, 2011
\item ``Evaluation of Methods for Classifying Epidemiological Data
    on Choropleth Maps in Series'', Brewer and Pickle, 2002
\end{enumerate}}

\subsection{Works on Technology Regarding 4D Visualization and
  Interface Design}
The next step for the current project is to create an on-line platform
that enables easy map share and design collaboration. The following
section contains some information of possible technologies for this
possible extenssion.

Resch et al.\ presented a good summary of existing web-3D and 4D
visualization technologies~\cite{Resch2014}. Early approaches for
web-based 3D map display are based on VRML, X3D or similar
instances. Their drawbacks are the requirement of additional add-ins
and their limited ability in handling large amount of data. Later
approaches include some Java-based or WebGL based tools. Zipf used
OpenStreetMap, Shuttle Radar Topography Mission and Java based
xNavigator to display 3D maps with a Java based
plug-in~\cite{Zipf2014}. WebGL based approaches include: a campus
information system by Hering et al.\ ~\cite{Hering2011}, a
geo-visualization system with ``browser-server'' architecture by Feng
et al.\ ~\cite{Feng2011}, open source software OpenWebGlobe developed
by Loesch et al.\ , WebGL Earth project by Klokan
Technologies~\cite{KlokanTechnologies2015} and Cesium project by
Analitical Graphics~\cite{AGI2015}. Cesium also support ``time-dynamic
graphical scenes''~\cite{CZML2015}

\section{Methodology}
  \begin{enumerate}[label*=\arabic*.]
  \item General Work Flow
  \item Simulation Setting
    \begin{enumerate}[label*=\arabic*.]
    \item Source of benchmark models and default assumptions
    \item Modified settings: urban environment context
    \item Summary of input and output parameters
    \end{enumerate}
  \item Model Setting
    \begin{enumerate}[label*=\arabic*.]
    \item Software used in modeling and their general features (why
      choosing them)
    \item Process of extracting building layout from Mellon Arena
      Project
      \begin{enumerate}[label*=\arabic*.]
      \item Topological Pattern of the Mellon Arena Project
      \item Building Type converting
      \item Final Plan of the Conceptual Model
      \end{enumerate}
    \end{enumerate}
    \item Data Collection and Analysis
      \begin{enumerate}[label*=\arabic*.]
      \item Simulation Data Analysis of the benchmark models
        \begin{enumerate}[label*=\arabic*.]
        \item Distribution: Histogram, box plot
        \item Profile: Energy - Time plot
        \end{enumerate}
      \item Potential Impact on system design or data visualization
        based on the analysis above
      \end{enumerate}
    \item Temporal Data Aggregation
      \begin{enumerate}[label*=\arabic*.]
      \item With CityEngine
      \item With ArcGIS (ArcScene)
      \item Comparison
      \end{enumerate}
  \item Data Classification and symbol/color design of a dynamic
    choropleth map
    \begin{enumerate}[label*=\arabic*.]
    \item Review of General Approaches: see 3.3
    \item ``Critical Values'' or special cutoff values to be
      considered in the context of Community Energy Planning: need to
      look up (@@)
    \item Final choices of classification method and symbol/color
      scheme and the implementation
    \end{enumerate}
  \end{enumerate}

\begin{comment}
\section{Interface Design}
  \begin{enumerate}[label*=\arabic*.]
  \item Guidelines from interface design case study: See 2.5
  \item User definition
    \begin{enumerate}[label*=\arabic*.]
    \item Potential Users: policy makers, urban planners with the
      interest in executing community level energy strategies,
      researchers in energy related fields, public groups or
      individuals.
    \item Target users for the current project: researchers in energy
      related fields
      \begin{enumerate}[label*=\arabic*.]
      \item Assumptions about the skill level and background knowledge
      \item How the assumptions influence design choices of the
        interface design
      \end{enumerate}
    \end{enumerate}
  \item Goal Function of the interface
    \begin{enumerate}[label*=\arabic*.]
    \item Revealing the spatial-temporal heating / cooling demand
      variation of the conceptual model by applying the Dynamic
      Energy Map on a conceptual urban setting
    \end{enumerate}
  \item Major Operation Description
    \begin{enumerate}[label*=\arabic*.]
    \item Navigate through dynamic map images with time sliders
    \item Provide several default settings for choropleth map display
    \item Provide a brief help window and documentation of the tool
    \end{enumerate}
  \item Current Interface Design
    \begin{enumerate}[label*=\arabic*.]
    \item General Layout
    \item Navigation Function
      \begin{enumerate}[label*=\arabic*.]
      \item Overall navigation of year-round data
      \item Navigate and compare with default time steps: month, day,
        hour
      \end{enumerate}
    \item Dynamic Plot
    \item Implementation tools and strategy
    \end{enumerate}
  \end{enumerate}
\item Conclusion
  \begin{enumerate}[label*=\arabic*.]
  \item Summary of the current approach in implementing the dynamic
    Energy Map
  \item Limitations of the current implementation
    \begin{enumerate}[label*=\arabic*.]
    \item Simplified building simulation assumption about urban
      environment
    \item Lack of user choices for the stand-alone user interface as a
      result of its dependence on existing modeling softwares
    \end{enumerate}
  \item Future Expansion of the project
    \begin{enumerate}[label*=\arabic*.]
    \item Adding information of the supply side: residual energy,
      sustainable energy
    \item Providing different interfaces for different user population
    \item 2D and 3D compatible \\The reason for providing 2D map
      together with 3D map is that 2D maps have the following good
      properties:
      \begin{enumerate}[label*=\arabic*.]
      \item Better for region selection and spatial navigation than 3D
        map
      \item Better for conveying spatial relationship that does not
        involve height induced variation
      \item For larger scale display of city, state or nationwide, 3D
        building geometries becomes less significant in providing the
        urban environment context
      \end{enumerate}
    \item Creating an on-line tool for better information share
      \begin{enumerate}[label*=\arabic*.]
      \item Potential techniques: see 2.4
      \end{enumerate}
    \end{enumerate}
  \end{enumerate}
\item Acknowledgments
\end{enumerate}
\end{comment}
\newpage
\bibliographystyle{plain}
\bibliography{myCitation}
\end{document}